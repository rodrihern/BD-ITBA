CREATE TABLE editorial
(
  codEdit char(3) PRIMARY KEY,
  direccion varchar(30),
  nombre TEXT NOT NULL,
  pais TEXT NOT NULL
);

CREATE TABLE libro
(
  ISBN varchar(8) PRIMARY KEY,
  titulo TEXT NOT NULL,
  autor TEXT,
  codEdit char(3),
  FOREIGN KEY (codEdit) REFERENCES editorial(codEdit) ON DELETE SET NULL ON UPDATE RESTRICT,
  genero TEXT NOT NULL,
  precio FLOAT NOT NULL
);

CREATE TABLE factura
(
  codFact INT PRIMARY KEY,
  fecha DATE NOT NULL,
  monto FLOAT NOT NULL
);

CREATE TABLE DETALLE_FACTURA
(  
  codFact INT,
  nroLinea INT,
  ISBN varchar(8),
  PRIMARY KEY(codFact, nroLinea),
  FOREIGN KEY(codFact) REFERENCES factura(codFact) ON DELETE CASCADE ON UPDATE RESTRICT,
  FOREIGN KEY(ISBN) REFERENCES libro(ISBN) ON DELETE CASCADE ON UPDATE RESTRICT,
  CANTIDAD INT NOT NULL
);

INSERT INTO editorial VALUES('WO5', NULL, 'Addison Wesley', 'Canada');
INSERT INTO editorial VALUES('XA3', NULL, 'Prentice Hall', 'USA');
INSERT INTO editorial VALUES('BO3', NULL, 'Mc Graw Hill', 'USA');

SET DATESTYLE TO ISO, DMY;
INSERT INTO factura VALUES(1000, '03/09/2015', 46.50);
INSERT INTO factura VALUES(1001, '03/09/2015', 124.30);
INSERT INTO factura VALUES(1002, '03/09/2015', 130);
INSERT INTO factura VALUES(1003, '30/09/2015', 157.90);
INSERT INTO factura VALUES(1004, '09/09/2015', 38);

INSERT INTO libro VALUES('15030108', 'El lenguaje c', 'Kernighan', 'XA3', 'Computacion', 28.50);
INSERT INTO libro VALUES('16015229', 'Perlas de prog.', 'Bentley', 'WO5', 'Computacion', 118.00);
INSERT INTO libro VALUES('30111230', 'Blancanieves', NULL, 'XA3', 'Infantil', 32.30);
INSERT INTO libro VALUES('18000111', 'Alicia en el pais', 'Carroll', 'BO3', 'Infantil', 52.00);
INSERT INTO libro VALUES('15030109', 'Origami', 'Youtang', 'XA3', 'Manualidades', 20.00);
INSERT INTO libro VALUES('16000205', 'Unix', 'Steavens', 'WO5', 'Computacion', 83.50);
INSERT INTO libro VALUES('18010300', 'El bigote', 'Carriere', 'WO5', 'Novela', 53.90);
INSERT INTO libro VALUES('17001030', 'Sr presidente', 'Asturias', NULL, 'Novela', 120.00);

INSERT INTO DETALLE_FACTURA VALUES(1000, 1, '15030108', 1);
INSERT INTO DETALLE_FACTURA VALUES(1000, 2, '16015229', 1);
INSERT INTO DETALLE_FACTURA VALUES(1001, 1, '17001030', 1);
INSERT INTO DETALLE_FACTURA VALUES(1001, 2, '30111230', 1);
INSERT INTO DETALLE_FACTURA VALUES(1001, 3, '15030109', 2);
INSERT INTO DETALLE_FACTURA VALUES(1002, 1, '16015229', 1);
INSERT INTO DETALLE_FACTURA VALUES(1002, 2, '16000205', 1);
INSERT INTO DETALLE_FACTURA VALUES(1002, 3, '15030108', 1);
INSERT INTO DETALLE_FACTURA VALUES(1003, 1, '18010300', 1);
INSERT INTO DETALLE_FACTURA VALUES(1003, 2, '18000111', 2);
INSERT INTO DETALLE_FACTURA VALUES(1004, 1, '15030109', 1);
INSERT INTO DETALLE_FACTURA VALUES(1004, 2, '16015229', 1);