## Anomalías:

- **Inserción**: un registro de datos no se puede insertar en una tabla porque tiene missing values requeridos por una o más columnas de la tabla.
- **Borrado**: la eliminación de un registro resulta en la eliminación involuntaria de datos importantes incluidos en dicho registro.
- **Actualización**: una instancia de datos se actualiza en una ubicación de una base de datos, pero en otras ubicaciones no. 
## Algoritmos de Clase
### Clausura de un Conjunto de Atributos
Si **X** es un conjunto de atributos de **R**, la clausura de **X**, denotada con $X^+$, respecto del conjunto de dependencias de F de dicho esquema, es el conjunto de atributos determinados por **X** a través de las dependencias de $F^+$: $X^+=\{A/X \rightarrow A \in F^+ \}$  

> No está a la **derecha de nadie** -> pertenecen a toda clave y cuando lo pongo llego a R evito tener que buscarle subconjuntos adentro.

### Dependencias Funcionales (FDs) 

El concepto central de la teoría de normalización son las **dependencias funcionales**. Son restricciones que se establecen entre dos conjuntos de atributos de una tabla.

#### **Definición: Dependencia Funcional**

Sean X e Y dos conjuntos de atributos de un esquema de relación R. Se dice que **X determina funcionalmente a Y** (o que Y depende funcionalmente de X), y se denota como X→Y, si para cualquier par de tuplas t1​ y t2​ de una instancia r de R, se cumple que:

Si t1​[X]=t2​[X], entonces t1​[Y]=t2​[Y]

Esto significa que un valor para el conjunto de atributos X tiene asociado exactamente un valor para el conjunto de atributos Y.

**Dependencia Funcional Trivial**: Una dependencia funcional X→Y es **trivial** si y solo si Y⊆X.

---

### Axiomas de Armstrong y Reglas de Inferencia 

Para poder razonar y derivar todas las dependencias funcionales posibles a partir de un conjunto inicial F, se utiliza un conjunto de axiomas y reglas de inferencia. Los **Axiomas de Armstrong** son un conjunto de reglas que es **correcto** (no genera dependencias inválidas) y **completo** (puede generar todas las dependencias válidas).

#### **Axiomas de Armstrong**
Dados los conjuntos de atributos X,Y,Z sobre un esquema de relación R:

- **A1: Reflexividad**: Si Y⊆X, entonces X→Y.
- **A2: Aumentación**: Si X→Y, entonces XZ→YZ.
- **A3: Transitividad**: Si X→Y y Y→Z, entonces X→Z.
#### **Reglas de Inferencia (Derivables de los Axiomas)**

Estas reglas simplifican la derivación de nuevas dependencias:

- **R1: Unión**: Si X→Y y X→Z, entonces X→YZ.
- **R2: Pseudo Transitividad**: Si X→Y y WY→Z, entonces WX→Z.
- **R3: Descomposición**: Si X→YZ, entonces X→Y y X→Z.
    

---

### Clausura de Atributos y Algoritmos 

Calcular la clausura completa de un conjunto de dependencias (F+) es computacionalmente muy costoso. En la práctica, es más útil resolver si una dependencia específica pertenece a la clausura. Para ello, se utiliza el concepto de **clausura de un conjunto de atributos** y un algoritmo eficiente para calcularla.

#### **Definición: Clausura de un Conjunto de Atributos**

Dado un conjunto de atributos X y un conjunto de dependencias funcionales F, la **clausura de X** (denotada como X+) es el conjunto de todos los atributos A que son funcionalmente determinados por X bajo F.
$$X^+=\{A/X \rightarrow A \in F^+ \}$$

Un uso fundamental de este concepto es que permite verificar si una dependencia X→Y se cumple, simplemente comprobando si Y⊆X+. También es clave para encontrar las claves candidatas de una relación: si X+ contiene todos los atributos del esquema R, entonces X es una superclave.

#### **Algoritmo para Calcular la Clausura de Atributos X+**

Este algoritmo tiene complejidad temporal lineal y es la herramienta fundamental para los ejercicios teóricos de normalización.

**Pseudo-código:**
Inicializar X+ con X
```
while (X+ sufra cambios)
	for (cada dependencia funcional Y -> Z en F)
		if (Y incluido X+)
			agregarle Z a X+
```

### Condición de Descomposición sin Pérdida para Dos Esquemas

$$ (R1 \cap R2) \rightarrow R1 - R2 \in F+ $$
$$ o\ bien $$
$$ (R1 \cap R2) \rightarrow R2 - R1 \in F+ $$
#### ¿Y si fueran N Esquemas?
Para determinar si la descomposición en más de dos esquemas tiene o no pérdida de información hay que usar una matriz especial denominada **tableu**.


$$
f(x)= \left\{ \begin{array}{lcc} aj\ si\ Ri\ contiene\ al\ atributo\ Aj \\ \\ bij\ si\ Ri\ no\ contiene\ al\ atributo\ Aj \end{array} \right.
$$
Si llego a una fila donde todas las variables son distinguidas (aj) $\Rightarrow$ no hay pérdida de información
### Algoritmo para calcular la proyección final de F+ sobre un subesquema de R

```
// Inicialización
Sea R el esquema de dependencias con dependencias F
Sea R1 el subesquema de R

F1 = F
X = R - R1 // Conjunto de atributos a eliminar
```

```
while (X ≠ Ø) {
    Tomar A ∈ X
    X = X - {A}
    RES = Ø
    
    // Iterar sobre dependencias en F1 cuyo lado derecho es A
    for (cada dependencia del tipo Y → A ∈ F1) {
        
        // Iterar sobre dependencias en F1 cuyo lado izquierdo contiene A
        for (cada dependencia del tipo AZ → B ∈ F1) {
            
            // Aplicar la regla de transitividad (o combinación): YZ → B
            h = YZ → B 
            
            // Verificar si la dependencia es no trivial (es decir, YZ no contiene B)
            if (h no es trivial) {
                RES = RES ∪ {h} // Agregar la nueva dependencia
            }
        }
    }
    
    // Eliminar la(s) dependencia(s) que contienen A
    for (cada dependencia f ∈ F1) {
        if (A está en f) {
            F1 = F1 - {f}
        }
    }
    
    // Agregar las dependencias generadas (RES) a F1
    F1 = F1 ∪ RES
}
```